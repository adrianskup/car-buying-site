<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Skup samochodÃ³w</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>Skup samochodÃ³w</h1>
      <p class="subtitle">WypeÅ‚nij formularz, aby otrzymaÄ‡ ofertÄ™</p>
    </header>
    
    <main>
      <form id="car-form">
        <div class="form-group">
          <label for="car-brand">Marka samochodu:</label>
          <select id="car-brand" name="car-brand" required>
            <option value="" disabled selected>Wybierz markÄ™</option>
            <option value="Alfa Romeo">Alfa Romeo</option>
            <option value="Audi">Audi</option>
            <option value="BMW">BMW</option>
            <option value="Chevrolet">Chevrolet</option>
            <option value="Chrysler">Chrysler</option>
            <option value="Citroen">Citroen</option>
            <option value="Dacia">Dacia</option>
            <option value="Fiat">Fiat</option>
            <option value="Ford">Ford</option>
            <option value="Honda">Honda</option>
            <option value="Hyundai">Hyundai</option>
            <option value="Jeep">Jeep</option>
            <option value="Kia">Kia</option>
            <option value="Land Rover">Land Rover</option>
            <option value="Lancia">Lancia</option>
            <option value="Lexus">Lexus</option>
            <option value="Mazda">Mazda</option>
            <option value="Mercedes">Mercedes</option>
            <option value="Mitsubishi">Mitsubishi</option>
            <option value="Nissan">Nissan</option>
            <option value="Opel">Opel</option>
            <option value="Peugeot">Peugeot</option>
            <option value="Porsche">Porsche</option>
            <option value="Renault">Renault</option>
            <option value="Seat">Seat</option>
            <option value="Skoda">Skoda</option>
            <option value="Subaru">Subaru</option>
            <option value="Suzuki">Suzuki</option>
            <option value="Tesla">Tesla</option>
            <option value="Toyota">Toyota</option>
            <option value="Volkswagen">Volkswagen</option>
            <option value="Volvo">Volvo</option>
            <option value="NIEMA">Inna (napisz w opisie)</option>
          </select>
        </div>

        <div class="form-group">
          <label for="car-model">Model:</label>
          <input type="text" id="car-model" name="car-model" required>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="year">Rok produkcji:</label>
            <input type="number" id="year" name="year" min="1950" max="2024" required>
          </div>
          <div class="form-group">
            <label for="mileage">Przebieg (km):</label>
            <input type="number" id="mileage" name="mileage" required>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="fuel">Paliwo:</label>
            <select id="fuel" name="fuel" required>
              <option value="diesel">Diesel</option>
              <option value="petrol">Benzyna</option>
              <option value="gaspetrol">Gaz+Benzyna</option>
              <option value="hybrid">Hybryda</option>
              <option value="electric">Elektryczny</option>
            </select>
          </div>
          <div class="form-group">
            <label for="transmission">Skrzynia biegÃ³w:</label>
            <select id="transmission" name="transmission" required>
              <option value="manual">Manualna</option>
              <option value="automatic">Automatyczna</option>
              <option value="cvt">CVT</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="body-condition">Stan nadwozia (0-5):</label>
            <input type="number" id="body-condition" name="body-condition" min="0" max="5" required>
          </div>
          <div class="form-group">
            <label for="technical-condition">Stan techniczny (0-5):</label>
            <input type="number" id="technical-condition" name="technical-condition" min="0" max="5" required>
          </div>
        </div>

        <div class="form-group">
          <label for="price">Cena (zÅ‚):</label>
          <input type="number" id="price" name="price" required>
        </div>

        <div class="form-group">
          <label for="description">Opis:</label>
          <textarea id="description" name="description" placeholder="Dodatkowe informacje o stanie samochodu" required></textarea>
        </div>

        <div class="form-group">
          <label for="car-photo">ZdjÄ™cia (max 9):</label>
          <input type="file" id="car-photo" name="car-photo" accept="image/*" multiple required>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="contact-name">ImiÄ™:</label>
            <input type="text" id="contact-name" name="contact-name" required>
          </div>
          <div class="form-group">
            <label for="phone">Telefon:</label>
            <input type="tel" id="phone" name="phone" pattern="(\+48\s?)?\d{3}[\s\-]?\d{3}[\s\-]?\d{3}" placeholder="+48 123 456 789" required>
          </div>
        </div>

        <button type="submit" class="submit-btn">WyÅ›lij ofertÄ™</button>
      </form>

      <div id="thank-you-message">
        <div class="success-icon">âœ“</div>
        <h2>DziÄ™kujemy!</h2>
        <p>Twoja oferta zostaÅ‚a wysÅ‚ana. Skontaktujemy siÄ™ z TobÄ… w ciÄ…gu 24 godzin.</p>
      </div>
    </main>
  </div>

  <script>
    document.getElementById('car-form').addEventListener('submit', async function(event) {
      event.preventDefault();
      
      const botToken = "8079391731:AAESPUGNq_qYJ1sFbhidzo8vRD9c5hydets";
      const chatId = "-1002536252900";
      
      // Collect form data
      const formValues = {
        brand: document.getElementById('car-brand').value,
        model: document.getElementById('car-model').value,
        year: document.getElementById('year').value,
        mileage: document.getElementById('mileage').value + ' km',
        fuel: document.getElementById('fuel').options[document.getElementById('fuel').selectedIndex].text,
        body: document.getElementById('body-condition').value + '/5',
        tech: document.getElementById('technical-condition').value + '/5',
        transmission: document.getElementById('transmission').options[document.getElementById('transmission').selectedIndex].text,
        price: document.getElementById('price').value + ' zÅ‚',
        name: document.getElementById('contact-name').value,
        phone: document.getElementById('phone').value,
        desc: document.getElementById('description').value
      };

      // Format message
      const text = `ðŸš— *NOWA OFERTA SAMOCHODU* ðŸš—
      \n*Marka:* ${formValues.brand}
      \n*Model:* ${formValues.model}
      \n*Rok:* ${formValues.year}
      \n*Przebieg:* ${formValues.mileage}
      \n*Paliwo:* ${formValues.fuel}
      \n*Skrzynia:* ${formValues.transmission}
      \n*Stan nadwozia:* ${formValues.body}
      \n*Stan techniczny:* ${formValues.tech}
      \n*Cena:* ${formValues.price}
      \n\n*Kontakt:*
      \n*ImiÄ™:* ${formValues.name}
      \n*Tel:* ${formValues.phone}
      \n\n*Opis:*
      ${formValues.desc}`;

      try {
        const files = Array.from(document.getElementById('car-photo').files).slice(0, 9);
        
        if (files.length > 0) {
          // Send as media group if photos exist
          const media = files.map((file, i) => ({
            type: 'photo',
            media: `attach://photo${i}`,
            caption: i === 0 ? text : '',
            parse_mode: 'Markdown'
          }));

          const formData = new FormData();
          formData.append('chat_id', chatId);
          formData.append('media', JSON.stringify(media));
          
          files.forEach((file, i) => {
            formData.append(`photo${i}`, file);
          });

          await fetch(`https://api.telegram.org/bot${botToken}/sendMediaGroup`, {
            method: 'POST',
            body: formData
          });
        } else {
          // Send only text if no photos
          await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              chat_id: chatId,
              text: text,
              parse_mode: 'Markdown'
            })
          });
        }

        // Show success message
        document.getElementById('car-form').style.display = 'none';
        document.getElementById('thank-you-message').style.display = 'block';
        
      } catch (error) {
        console.error('Error:', error);
        alert('WystÄ…piÅ‚ bÅ‚Ä…d podczas wysyÅ‚ania. SprÃ³buj ponownie.');
      }
    });
  </script>
</body>
</html>
