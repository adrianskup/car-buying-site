<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Skup samochod√≥w</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Strona do skupu samochod√≥w</h1>
  </header>
  <main>
    <form id="car-form">
      <label for="car-brand">Marka samochodu (je≈ºeli twojej marki niema wybierz "NIEMA"):</label>
      <select id="car-brand" name="car-brand" required>
        <option value="" disabled selected>Wybierz markƒô</option>
        <option value="Alfa Romeo">Alfa Romeo</option>
        <option value="Audi">Audi</option>
        <option value="BMW">BMW</option>
        <option value="Chevrolet">Chevrolet</option>
        <option value="Chrysler">Chrysler</option>
        <option value="Citroen">Citroen</option>
        <option value="Dacia">Dacia</option>
        <option value="Fiat">Fiat</option>
        <option value="Ford">Ford</option>
        <option value="Honda">Honda</option>
        <option value="Hyundai">Hyundai</option>
        <option value="Jeep">Jeep</option>
        <option value="Kia">Kia</option>
        <option value="Land Rover">Land Rover</option>
        <option value="Lancia">Lancia</option>
        <option value="Lexus">Lexus</option>
        <option value="Mazda">Mazda</option>
        <option value="Mercedes">Mercedes</option>
        <option value="Mitsubishi">Mitsubishi</option>
        <option value="Nissan">Nissan</option>
        <option value="Opel">Opel</option>
        <option value="Peugeot">Peugeot</option>
        <option value="Porsche">Porsche</option>
        <option value="Renault">Renault</option>
        <option value="Seat">Seat</option>
        <option value="Skoda">Skoda</option>
        <option value="Subaru">Subaru</option>
        <option value="Suzuki">Suzuki</option>
        <option value="Tesla">Tesla</option>
        <option value="Toyota">Toyota</option>
        <option value="Volkswagen">Volkswagen</option>
        <option value="Volvo">Volvo</option>
        <option value="NIEMA">NIEMA</option>
      </select>

      <label for="car-model">Model samochodu:</label>
      <input type="text" id="car-model" name="car-model" required>

      <label for="year">Rok produkcji:</label>
      <input type="number" id="year" name="year" required>

      <label for="mileage">Przebieg:</label>
      <input type="text" id="mileage" name="mileage" required>

      <label for="fuel">Rodzaj paliwa:</label>
      <select id="fuel" name="fuel" required>
        <option value="diesel">Diesel</option>
        <option value="petrol">Benzyna</option>
        <option value="gaspetrol">Gaz+Benzyna</option>
        <option value="hybrid">Hybryda</option>
        <option value="electric">Elektryczny</option>
      </select>

      <label for="body-condition">Stan nadwozia (0-5):</label>
      <input type="number" id="body-condition" name="body-condition" min="0" max="5" required>

      <label for="technical-condition">Stan techniczny (0-5):</label>
      <input type="number" id="technical-condition" name="technical-condition" min="0" max="5" required>

      <label for="transmission">Rodzaj skrzyni bieg√≥w:</label>
      <select id="transmission" name="transmission" required>
        <option value="manual">Manualna</option>
        <option value="automatic">Automatyczna</option>
        <option value="cvt">CVT</option>
      </select>

      <label for="description">Kr√≥tki opis:</label>
      <textarea id="description" name="description" placeholder="Napisz kr√≥tki opis samoch√≥du np. co do zrobienia, szczeg√≥≈Çy stanu, dod. elementy" required></textarea>

      <label for="car-photo">Dodaj zdjƒôcia (do 9):</label>
      <input type="file" id="car-photo" name="car-photo" accept="image/*" multiple required>

      <label for="price">Cena:</label>
      <input type="number" id="price" name="price" required>

      <label for="contact-name">Imiƒô:</label>
      <input type="text" id="contact-name" name="contact-name" required>

      <label for="phone">Numer telefonu:</label>
      <input type="tel" id="phone" name="phone" pattern="(\+48\s?)?\d{3}[\s\-]?\d{3}[\s\-]?\d{3}|\+380\s?\d{2}[\s\-]?\d{3}[\s\-]?\d{2}[\s\-]?\d{2}" placeholder="Przyk≈Çad: +48 123 456 789 lub +380 12 345 67 89" required>

      <button type="submit">Wy≈õlij</button>
    </form>

    <div id="thank-you-message">
      <h2>Dziƒôkujemy!</h2>
      <p>Je≈õli Tw√≥j samoch√≥d nam siƒô spodoba, skontaktujemy siƒô z TobƒÖ wkr√≥tce!</p>
    </div>
  </main>

  <script>
    document.getElementById('car-form').addEventListener('submit', async function(event) {
      event.preventDefault();
      
      const botToken = "8079391731:AAESPUGNq_qYJ1sFbhidzo8vRD9c5hydets";
      const chatId = "-1002536252900";
      
      // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
      const formData = {
        brand: document.getElementById('car-brand').value,
        model: document.getElementById('car-model').value,
        year: document.getElementById('year').value,
        mileage: document.getElementById('mileage').value,
        fuel: document.getElementById('fuel').value,
        bodyCondition: document.getElementById('body-condition').value,
        techCondition: document.getElementById('technical-condition').value,
        transmission: document.getElementById('transmission').value,
        description: document.getElementById('description').value,
        price: document.getElementById('price').value,
        name: document.getElementById('contact-name').value,
        phone: document.getElementById('phone').value
      };

      // –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
      const text = `üöó *Nowa oferta samochodu* üöó
      \n*Marka:* ${formData.brand}
      \n*Model:* ${formData.model}
      \n*Rok:* ${formData.year}
      \n*Przebieg:* ${formData.mileage} km
      \n*Paliwo:* ${formData.fuel}
      \n*Stan nadwozia:* ${formData.bodyCondition}/5
      \n*Stan techniczny:* ${formData.techCondition}/5
      \n*Skrzynia bieg√≥w:* ${formData.transmission}
      \n*Cena:* ${formData.price} z≈Ç
      \n*Imiƒô:* ${formData.name}
      \n*Telefon:* ${formData.phone}
      \n\n*Opis:* ${formData.description}`;

      // –ü–æ–ª—É—á–∞–µ–º —Ñ–∞–π–ª—ã (–æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–æ 9)
      const files = Array.from(document.getElementById('car-photo').files).slice(0, 9);
      
      try {
        if (files.length > 0) {
          // –ï—Å–ª–∏ –µ—Å—Ç—å —Ñ–æ—Ç–æ - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–∞–∫ –∞–ª—å–±–æ–º —Å —Ç–µ–∫—Å—Ç–æ–º
          const mediaGroup = files.map((file, index) => ({
            type: 'photo',
            media: `attach://photo_${index}`,
            caption: index === 0 ? text : undefined,
            parse_mode: 'Markdown'
          }));

          const formData = new FormData();
          formData.append('chat_id', chatId);
          formData.append('media', JSON.stringify(mediaGroup));
          
          files.forEach((file, index) => {
            formData.append(`photo_${index}`, file);
          });

          await fetch(`https://api.telegram.org/bot${botToken}/sendMediaGroup`, {
            method: 'POST',
            body: formData
          });
        } else {
          // –ï—Å–ª–∏ –Ω–µ—Ç —Ñ–æ—Ç–æ - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç
          await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              chat_id: chatId,
              text: text,
              parse_mode: 'Markdown'
            })
          });
        }

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
        document.getElementById('car-form').style.display = 'none';
        document.getElementById('thank-you-message').style.display = 'block';
        
      } catch (error) {
        console.error('B≈ÇƒÖd wysy≈Çania:', error);
        alert('WystƒÖpi≈Ç b≈ÇƒÖd podczas wysy≈Çania formularza. Spr√≥buj ponownie.');
      }
    });
  </script>
</body>
</html>
